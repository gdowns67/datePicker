(function(n,t){"use strict";function u(n,t){n.each(function(n,u){var f=new r(u,t);u.datePicker=f;i.push(f)})}function r(t,i){this.element=n(t);this.options=i||{};this.init()}var i=[];t.datePickerFactory=u;t.dpInstances=i;n.fn.datePicker=function(n){return this.each(function(){var t=new r(this,n);this.datePicker=t;i.push(t)})};r.prototype={createBoilerPlate:function(){var i=this.wrapperElement=n("<div/>"),t;i.addClass("datepicker-wrapper");t=this.element;i.insertBefore(t).append(t).append(this.selector)},date:{current:{year:function(){return this.currentDate.getFullYear()},month:{index:function(){return this.currentDate.getMonth()}},day:function(){return this.currentDate.getDate()}},month:{string:function(){return this.monthToString(this.currentMonthView,this.config.shorthandCurrentMonth)},days:function(){return this.currentMonthView===1&&(this.currentYearView%4==0&&this.currentYearView%100!=0||this.currentYearView%400==0)?29:this.metadata.daysInMonth[this.currentMonthView]}}},monthToString:function(n,t){return t===!0?this.metadata.monthNamesShort[n]:this.metadata.monthNames[n]},buildHeaders:function(){var i=this.metadata,t=n("<thead/>"),r=i.dayNamesShort;t.html("<tr><th>"+r.join("<\/th><th>")+"<\/th><\/tr>");this.calendar.append(t)},buildCalendar:function(){var t=new Date(this.currentYearView,this.currentMonthView,1).getDay(),o=this.date.month.days.call(this),f=document.createDocumentFragment(),i=n("<tr/>"),u,r;t-=this.metadata.firstDayOfWeek;t<0&&(t+=7);u=t;this.calendarBody.html("");t>0&&i.html('<td colspan="'+t+'">&nbsp;<\/td>');var s=this.date.current.month.index.call(this),h=this.date.current.day.call(this),e="";for(r=1;r<=o;r++)u===7&&(f.appendChild(i.get(0)),i=n("<tr/>"),u=0),e=this.currentMonthView===s&&r===h?" today":"",i.html(i.html()+'<td><span class="datepicker-day'+e+'">'+r+"<\/span><\/td>"),u++;f.appendChild(i.get(0));this.calendar.append(this.calendarBody.append(f))},updateNav:function(){this.navigationCurrentMonth.html(this.date.month.string.call(this)+" "+this.currentYearView)},buildNav:function(){var t=n('<div class="datepicker-months"/>'),i=n('<span class="datepicker-prev-month">&lt;<\/span><span class="datepicker-next-month">&gt;<\/span>');t.html(i);t.append(this.navigationCurrentMonth);this.updateNav();this.calendarContainer.append(t);i.on("click",this.onChangeMonth.bind(this))},onMonthChange:function(){this.currentMonthView<0&&(this.currentYearView--,this.currentMonthView=11);this.currentMonthView>11&&(this.currentYearView++,this.currentMonthView=0)},documentClick:function(){this.isOpen&&(this.onClose(),this.isOpen=!1)},onDateSelect:function(n){n.stopImmediatePropagation();var t=n.target,i=t.className,r;i&&i==="datepicker-day"&&(this.selectedDate={day:parseInt(t.innerHTML,10),month:this.currentMonthView,year:this.currentYearView},r=new Date(this.selectedDate.year,this.selectedDate.month,this.selectedDate.day).getTime(),this.element.val(moment(r).format(this.config.dateFormat)),this.onClose())},buildWidget:function(){this.buildNav();this.buildHeaders();this.buildCalendar();this.calendarContainer.append(this.calendar);this.wrapperElement.append(this.calendarContainer)},bindEvents:function(){this.element.on("blur",this.onClose.bind(this));this.selector.on("click",this.onOpen.bind(this));this.calendarContainer.on("mousedown",this.onDateSelect.bind(this));n(document).on("click",this.documentClick.bind(this))},unbindEvents:function(){n(document).off("click",this.documentClick);n(this.element).off("blur",this.onClose);n(this.element).off("click",this.onOpen);n(this.calendarContainer).off("mousedown",this.onDateSelect)},onOpen:function(t){t.stopImmediatePropagation();this.domInit||(this.buildWidget(),this.domInit=!0);this.wrapperElement&&n(this.wrapperElement).hasClass("open")?(this.onClose(),this.isOpen=!1):(n(this.wrapperElement).addClass("open"),this.isOpen=!0)},onClose:function(){n(document).off("click",this.documentClick);this.wrapperElement&&n(this.wrapperElement).removeClass("open");this.isOpen=!1},onDestroy:function(){n(this.selector).remove();n(this.calendarContainer).remove();n(this.element).insertBefore(this.wrapperElement);n(this.wrapperElement).remove();this.unbindEvents()},onChangeMonth:function(n){n.stopImmediatePropagation();var t=n.target.className;t==="datepicker-prev-month"?this.currentMonthView--:this.currentMonthView++;this.onMonthChange();this.updateNav();this.buildCalendar()},init:function(){this.defaultConfig={dateFormat:"MMMM Do YYYY",shorthandCurrentMonth:!1};this.selector=n('<span class="fa fa-calendar date-picker-selector"><\/span>');this.selector.insertAfter(this.element);this.calendarContainer=n('<div class="datepicker-calendar"/>');this.navigationCurrentMonth=n('<span class="datepicker-current-month"><\/span');this.calendar=n("<table/>");this.calendarBody=n("<tbody/>");this.currentDate=new Date;this.config=n.extend({},this.defaultConfig,this.options);this.currentYearView=this.date.current.year.call(this);this.currentMonthView=this.date.current.month.index.call(this);this.currentDayView=this.date.current.day.call(this);this.bindEvents();this.createBoilerPlate();this.domInit=!1},metadata:{monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],dayNamesShort:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:1}}})($,window.widgets=window.widgets||{});
//# sourceMappingURL=datepicker.min.js.map
